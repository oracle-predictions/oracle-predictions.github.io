var e=function(){return e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},e.apply(this,arguments)};function t(e,t,n){for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}var n,r,o,i,a,p,s,u,c,l,d,b,f,A,v,w,W,V,K,_,h,m="undefined"!=typeof window,S=Boolean(m&&window.AndroidBridge),y=Boolean(m&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.VKWebAppClose),g=Boolean(m&&window.ReactNativeWebView&&"function"==typeof window.ReactNativeWebView.postMessage),E=m&&!S&&!y,O=E&&/(^\?|&)vk_platform=mobile_web(&|$)/.test(location.search),k=E?"message":"VKWebAppEvent",T=t(["VKWebAppInit","VKWebAppGetCommunityAuthToken","VKWebAppAddToCommunity","VKWebAppAddToHomeScreenInfo","VKWebAppClose","VKWebAppCopyText","VKWebAppCreateHash","VKWebAppGetUserInfo","VKWebAppSetLocation","VKWebAppSendToClient","VKWebAppGetClientVersion","VKWebAppGetPhoneNumber","VKWebAppGetEmail","VKWebAppGetGroupInfo","VKWebAppGetGeodata","VKWebAppGetCommunityToken","VKWebAppGetConfig","VKWebAppGetLaunchParams","VKWebAppSetTitle","VKWebAppGetAuthToken","VKWebAppCallAPIMethod","VKWebAppJoinGroup","VKWebAppLeaveGroup","VKWebAppAllowMessagesFromGroup","VKWebAppDenyNotifications","VKWebAppAllowNotifications","VKWebAppOpenPayForm","VKWebAppOpenApp","VKWebAppShare","VKWebAppShowWallPostBox","VKWebAppScroll","VKWebAppShowOrderBox","VKWebAppShowLeaderBoardBox","VKWebAppShowInviteBox","VKWebAppShowRequestBox","VKWebAppAddToFavorites","VKWebAppShowStoryBox","VKWebAppStorageGet","VKWebAppStorageGetKeys","VKWebAppStorageSet","VKWebAppFlashGetInfo","VKWebAppSubscribeStoryApp","VKWebAppOpenWallPost","VKWebAppCheckAllowedScopes","VKWebAppCheckBannerAd","VKWebAppHideBannerAd","VKWebAppShowBannerAd","VKWebAppCheckNativeAds","VKWebAppShowNativeAds","VKWebAppRetargetingPixel","VKWebAppConversionHit","VKWebAppShowSubscriptionBox","VKWebAppCheckSurvey","VKWebAppShowSurvey","VKWebAppScrollTop","VKWebAppScrollTopStart","VKWebAppScrollTopStop","VKWebAppShowSlidesSheet","VKWebAppTranslate","VKWebAppRecommend","VKWebAppAddToProfile","VKWebAppGetFriends"],E&&!O?["VKWebAppResizeWindow","VKWebAppAddToMenu","VKWebAppShowInstallPushBox","VKWebAppShowCommunityWidgetPreviewBox","VKWebAppCallStart","VKWebAppCallJoin","VKWebAppCallGetStatus"]:["VKWebAppShowImages"]),I=m?window.AndroidBridge:void 0,B=y?window.webkit.messageHandlers:void 0,P=E?parent:void 0;function R(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.includes(void 0)||t.includes(null)?R.apply(void 0,t.filter((function(e){return"function"==typeof e}))):function(n){if(0===t.length)return n;var r,o={subscribe:n.subscribe,send:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.send.apply(n,e)}};return r=t.filter((function(e){return"function"==typeof e})).map((function(e){return e(o)})).reduce((function(e,t){return function(n){return e(t(n))}}))(n.send),e(e({},n),{send:r})}}(o=r||(r={})).REWARD="reward",o.INTERSTITIAL="interstitial",(a=i||(i={})).RESIZE="resize",a.OVERLAY="overlay",(s=p||(p={})).TOP="top",s.BOTTOM="bottom",(c=u||(u={})).LEFT="left",c.RIGHT="right",c.CENTER="center",(d=l||(l={})).COMPACT="compact",d.REGULAR="regular",(f=b||(b={})).HORIZONTAL="horizontal",f.VERTICAL="vertical",(v=A||(A={})).CAMERA="camera",v.LOCATION="location",v.PHOTO="photo",(W=w||(w={})).RU="ru",W.UK="uk",W.UA="ua",W.EN="en",W.BE="be",W.KZ="kz",W.PT="pt",W.ES="es",(K=V||(V={})).ADMIN="admin",K.EDITOR="editor",K.MEMBER="member",K.MODER="moder",K.NONE="none",(h=_||(_={})).DESKTOP_WEB="desktop_web",h.DESKTOP_WEB_MESSENGER="desktop_web_messenger",h.DESKTOP_APP_MESSENGER="desktop_app_messenger",h.MOBILE_WEB="mobile_web",h.MOBILE_ANDROID="mobile_android",h.MOBILE_ANDROID_MESSENGER="mobile_android_messenger",h.MOBILE_IPHONE="mobile_iphone",h.MOBILE_IPHONE_MESSENGER="mobile_iphone_messenger",h.MOBILE_IPAD="mobile_ipad";var G=function(e){var t={};try{new URLSearchParams(e).forEach((function(e,n){switch(n){case"vk_ts":case"vk_is_recommended":case"vk_profile_id":case"vk_has_profile_button":case"vk_testing_group_id":case"vk_user_id":case"vk_app_id":case"vk_group_id":t[n]=Number(e);break;case"sign":case"vk_chat_id":case"vk_ref":case"vk_access_token_settings":t[n]=e;break;case"odr_enabled":t.odr_enabled="1"===e?1:void 0;break;case"vk_is_app_user":case"vk_are_notifications_enabled":case"vk_is_favorite":t[n]=function(e){switch(e){case"0":return 0;case"1":return 1;default:return}}(e);break;case"vk_language":t.vk_language=(r=e,Object.values(w).some((function(e){return e===r}))?e:void 0);break;case"vk_viewer_group_role":t.vk_viewer_group_role=function(e){return Object.values(V).some((function(t){return t===e}))}(e)?e:void 0;break;case"vk_platform":t.vk_platform=function(e){return Object.values(_).some((function(t){return t===e}))}(e)?e:void 0}var r}))}catch(n){console.warn(n)}return t},M=function(){var r=void 0,o=[],i=Math.random().toString(36).substring(2,5);function a(e){o.push(e)}function p(e){return console.warn("This method is deprecated. Use supportsAsync instead."),S?!(!I||"function"!=typeof I[e]):y?!(!B||!B[e]||"function"!=typeof B[e].postMessage):!!E&&T.includes(e)}function s(){return y||S}function u(){return E&&window.parent!==window}function c(){return s()||u()}function l(e){if(y||S)return t([],o).map((function(t){return t.call(null,e)}));var n=null==e?void 0:e.data;if(E&&n){if(g&&"string"==typeof n)try{n=JSON.parse(n)}catch(s){}var i=n.type,a=n.data,p=n.frameId;i&&("VKWebAppSettings"!==i?t([],o).map((function(e){return e({detail:{type:i,data:a}})})):r=p)}}g&&/(android)/i.test(navigator.userAgent)?document.addEventListener(k,l):"undefined"!=typeof window&&"addEventListener"in window&&window.addEventListener(k,l);var d=function(t,n,r){var o=function(e){var t={current:0,next:function(){return++this.current}},n={};return{add:function(r,o){var i=null!=o?o:"".concat(t.next(),"_").concat(e);return n[i]=r,i},resolve:function(e,t,r){var o=n[e];o&&(r(t)?o.resolve(t):o.reject(t),n[e]=null)}}}(r);return n((function(e){if(e.detail&&e.detail.data&&"object"==typeof e.detail.data&&"request_id"in e.detail.data){var t=e.detail.data,n=t.request_id,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(t,["request_id"]);n&&o.resolve(n,r,(function(e){return!("error_type"in e)}))}})),function(n,r){return void 0===r&&(r={}),new Promise((function(i,a){var p=o.add({resolve:i,reject:a},r.request_id);t(n,e(e({},r),{request_id:p}))}))}}((function(e,t){I&&I[e]?I[e](JSON.stringify(t)):B&&B[e]&&"function"==typeof B[e].postMessage?B[e].postMessage(t):g?window.ReactNativeWebView.postMessage(JSON.stringify({handler:e,params:t})):P&&"function"==typeof P.postMessage&&P.postMessage({handler:e,params:t,type:"vk-connect",webFrameId:r,connectVersion:"2.15.3"},"*")}),a,i);return a((function(e){e.detail&&"SetSupportedHandlers"===e.detail.type&&(n=e.detail.data.supportedHandlers)})),{send:d,sendPromise:d,subscribe:a,unsubscribe:function(e){var t=o.indexOf(e);t>-1&&o.splice(t,1)},supports:p,supportsAsync:function(e){return t=this,o=function(){var t;return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function p(p){return function(s){return function(p){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,p[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&p[0]?r.return:p[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,p[1])).done)return o;switch(r=0,o&&(p=[2&p[0],o.value]),p[0]){case 0:case 1:o=p;break;case 4:return a.label++,{value:p[1],done:!1};case 5:a.label++,r=p[1],p=[0];continue;case 7:p=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==p[0]&&2!==p[0])){a=0;continue}if(3===p[0]&&(!o||p[1]>o[0]&&p[1]<o[3])){a.label=p[1];break}if(6===p[0]&&a.label<o[1]){a.label=o[1],o=p;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(p);break}o[2]&&a.ops.pop(),a.trys.pop();continue}p=t.call(e,a)}catch(s){p=[6,s],r=0}finally{n=o=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([p,s])}}}(this,(function(r){switch(r.label){case 0:if(S||y)return[2,p(e)];if(n)return[2,n.includes(e)];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,d("SetSupportedHandlers")];case 2:return t=r.sent(),[2,(n=t.supportedHandlers).includes(e)];case 3:return r.sent(),[2,(n=["VKWebAppInit"]).includes(e)];case 4:return[2]}}))},new((r=void 0)||(r=Promise))((function(e,n){function i(e){try{p(o.next(e))}catch(t){n(t)}}function a(e){try{p(o.throw(e))}catch(t){n(t)}}function p(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,a)}p((o=o.apply(t,[])).next())}));var t,r,o},isWebView:s,isIframe:u,isEmbedded:c,isStandalone:function(){return!c()}}}();export{u as BannerAdAlign,l as BannerAdHeightType,i as BannerAdLayoutType,p as BannerAdLocation,b as BannerAdOrientation,r as EAdsFormats,V as EGetLaunchParamsResponseGroupRole,w as EGetLaunchParamsResponseLanguages,_ as EGetLaunchParamsResponsePlatforms,A as EGrantedPermission,R as applyMiddleware,M as default,G as parseURLSearchParamsForGetLaunchParams};
